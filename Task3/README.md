## Проблемы текущего решения
1) Полная синхронность во всех вызовах, запрашивая новые данные из агрегатора мы будем ждать, пока все партнерские апи будут опрошены и сагрегированны. С учетом планируемого роста нагрузки речь может пойти о внушительных объемах данных и большей вероятности ошибок
2) Данные до ходят до пользователей с большим лагом. Речь про core-app, который будет предоставлять пользователям информацию о новых товарах с задержкой - потенциальная потеря прибыли. Если с страховыми есть четкая договоренность по регулярности отправки отчетов, то и с ins-comp-settlement будут проблемы
3) В случае если данные будут получены от агрегатора, но не успеют записаться в локальную бд, придется делать запросы заново. Растущая нагрузка приведет к увеличению объемов данных, записанных в рамках одной транзакции в базу - тоже потенциально проблемное место

## Решения
1) Между core-app и ins-comp-settlement настраиваем потоковую репликацию с Transactional Outbox(Transaction log tailing используем, так как впостгресе есть прекрасные вал файлы и все нужные инструменты для настройки репликации), так как работа идет с партнерами и потеря информации в ins-comp-settlement критична
2) Между агрегатором и core-app, ins-comp-settlement настраиваем топик кафки с данными о новых товарах. Так как сам агрегатор работает с внешними системами, настроить EDA там может быть проблемой
3) На стороне агрегатора настроить регулярный опрос внешних систем
